<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>پرسشنامه سبک فرزندپروری</title>
<style>
body { font-family: Tahoma, sans-serif; padding: 20px; direction: rtl; }
.question { margin-bottom: 15px; }
label { margin-right: 10px; }
.result { margin-top: 20px; padding: 15px; border: 1px solid #ccc; background: #f9f9f9; }
</style>
</head>
<body>

<h2>پرسشنامه سنجش سبک فرزندپروری مبتنی بر تئوری انتخاب</h2>

<form id="questionnaireForm">

<label>نام: <input type="text" name="name" required></label><br><br>
<label>جنسیت: 
<input type="radio" name="gender" value="زن" required> زن
<input type="radio" name="gender" value="مرد"> مرد
</label><br><br>
<label>سن: <input type="number" name="age" required></label><br><br>
<label>تحصیلات: <input type="text" name="education" required></label><br><br>

<div id="questions"></div>

<button type="submit">ارسال</button>
</form>

<div class="result" id="result" style="display:none;"></div>

<script>
// همه 40 سوال
const questions = [
"در صورت بروز رفتار اشتباهی از فرزندم به او اطمینان می دهم که جدای از رفتارش او برای من ارزشمند است.",
"به فرزندم در مسائل شخصی اش مثل روابط اجتماعی و تحصیلی ...اعتماد دارم.",
"وقتی فرزندم را با فرزند دیگران مقایسه می کنم و احساس می کنم به خوبی فرزندان دیگران نیست ، این احساسات را به فرزندم منتقل می کنم.",
"وقتی فرزندم در کاری شکست می خورد ، سعی می کنم او را آرام کنم.",
"در شرایطی که فرزندم خواسته ی مطلوبم را انجام دهد ، به او بیشتر محبت یا توجه می کنم",
"هنگامی که فرزندم در مسائلی نظر متفاوتی از نظر من دارد، با کمال آرامش به نظرات او توجه می کنم.",
"به فرزندم توضیح می دهم که چرا باید از قوانین پیروی کند.",
"به فرزندم هشدار می دهم که اگر به تقاضای من عمل نکند خواسته هایش را برآورده نخواهم کرد.",
"به فرزندم می گویم که اگر خواهان رفتارهای مطلوبی از طرف من است ، در عوض باید خواسته هایم را اجابت کند.",
"وقتی فرزندم با احترام با دیگران برخورد می کند او را تحسین می کنم.",
"فرزندم می تواند هنگام خرید به سلیقه خودش هر چیز را انتخاب کند.",
"وقتی فرزندم در تکالیف و کارهایش موفق می شود او را تحسین می کنم.",
"اگر رابطه فرزندم با دوستانش مورد تایید من نباشد از او ایراد می گیرم.",
"از عملکرد تحصیلی فرزندم گلایه می کنم.",
"فرزندم را تهدید می کنم که اگر خواسته ام را عملی نکند ، پیامدهای بدی متوجه اوست.",
"نارضایتی از شخصیت فرزندم را برایش بازگو می کنم.",
"حتی وقتی مخالف خواسته یا کار فرزندم هستم او را تشویق می کنم تا حرفش را بزند.",
"سعی می کنم کوچکترین رفتارهای مثبت فرزندم را تحسین کنم.",
"به طور مرتب به فرزندم یادآوری می کنم که وظایف و تکالیفش را فراموش نکند.",
"یکی از برنامه های طبیعی خانه ما گفتگوهای دوستانه خانوادگی است.",
"قبل از اینکه از فرزندم بخواهم کاری انجام دهد به میل و خواسته او نیز توجه می کنم.",
"فرزندم را بابت اینکه مانند همسالانش قادر نیست از عهده وظایفش برآید سرزش می کنم.",
"حتی وقتی فرزندم صحبتهایی که می کند به نظرم ارزش چندانی ندارد با این حال به صحبتهایش توجه می کنم.",
"زمانی که فرزندم با من اختلاف نظر دارد با احترام با او برخورد می کنم.",
"به فرزندم می گویم که در مورد کارهای خوب یا بد او چگونه فکر می کنم و چه احساسی دارم.",
"اگر نحوه رفتار فرزندم خوشایندم نباشد از او انتقاد می کنم.",
"اگر وضع ظاهری و پوشش فرزندم خوشایند من نباشد ، از او انتقاد می کنم.",
"وقتی به فرزندم ابراز علاقه و محبت می کنم که او مطابق میل من عمل کند.",
"اجازه می دهم تا فرزندم در قوانین و مقررات خانواده دخالت کند و نظر دهد.",
"وقتی فرزندم از دوستانش برایم تعریف می کند حتی اگر دوستانش مورد تایید من نباشند همچنان با توجه به حرفهایش گوش می دهم.",
"فرزندم را مرتب بابت اشتباهاتش سرزنش می کنم.",
"اوقات گرم و صمیمی ای با فرزندم دارم.",
"در مشکلاتی که با فرزندم دارم ، سعی می کنم برای حل مشکل در وقت مناسب با او به گفتگو بپردازم.",
"وقتی فرزندم می خواهد دوستانش را به منزل دعوت کند با او همراهی می کنم.",
"دائم به فرزندم می گویم که حرف مرا گوش نمی کند.",
"اگر نحوه صحبت کردن فرزندم را دوست نداشته باشم از او ایراد می گیرم.",
"وقتی فرزندم کار نادرست یا اشتباهی انجام دهد تا مدتی آن را به رخش می کشم.",
"به فرزندم در مورد پیامد و نتیجه کارهایش توضیح می دهم.",
"هنگام مشاجره با فرزندم ، او را تهدید به محرومیت از بعضی امکاناتش می کنم.",
"برای تنبیه فرزندم اجازه نمی دهم کار مورد علاقه اش را انجام دهد یا از وسایل مورد علاقه اش استفاده کند."
];

// خرده‌مقیاس‌ها
const subscales = {
"حمایت کردن": [1,4,17],
"دلگرمی دادن": [10,12,18,32],
"گوش دادن": [23,30],
"پذیرفتن": [6,11,29,34],
"اعتماد کردن": [2,4],
"احترام گذاشتن": [21,24],
"گفتگوکردن": [7,20,25,33,38],
"انتقاد کردن": [13,26,27,36],
"سرزنش کردن": [22,31],
"شکایت و گلایه کردن": [3,14,16],
"غر و نق زدن": [19,35,37],
"تهدیدکردن": [8,15,39],
"تنبیه کردن": [40],
"مهار کردن از راه رشوه دادن": [5,9,28]
};

// ایجاد فرم سوالات
const qContainer = document.getElementById('questions');
questions.forEach((q,index)=>{
  const div = document.createElement('div');
  div.className = "question";
  div.innerHTML = `<strong>سوال ${index+1}:</strong> ${q}<br>
    <label><input type="radio" name="Q${index+1}" value="4" required> همیشه</label>
    <label><input type="radio" name="Q${index+1}" value="3"> اغلب اوقات</label>
    <label><input type="radio" name="Q${index+1}" value="2"> گاهی اوقات</label>
    <label><input type="radio" name="Q${index+1}" value="1"> به ندرت</label>
    <label><input type="radio" name="Q${index+1}" value="0"> هرگز</label>`;
  qContainer.appendChild(div);
});

// ارسال فرم
document.getElementById('questionnaireForm').addEventListener('submit', function(e){
e.preventDefault();

const formData = new FormData(this);
const data = {};
formData.forEach((value,key)=> data[key]=value);

// محاسبه نمرات خرده‌مقیاس‌ها
let resultText = "<h3>نتایج شما:</h3>";
for(let scale in subscales){
  let sum = 0;
  subscales[scale].forEach(qNum=>{
    const val = parseInt(data["Q"+qNum]) || 0;
    sum += val;
  });
  let level = sum < subscales[scale].length*2 ? "پایین" :
              sum < subscales[scale].length*3 ? "متوسط" : "بالا";
  resultText += `<p><strong>${scale}:</strong> ${sum} → ${level}</p>`;
}

document.getElementById('result').innerHTML = resultText;
document.getElementById('result').style.display = "block";

// ارسال به Google Sheet
fetch("https://script.google.com/macros/s/AKfycbwRaIL9Qy2yHrdIhzMTB0RKE3PivbUgac3ZfyUzBCTkPJT2homKJ_C-jfcSeSrNZ41Dug/exec
",{
method:"POST",
body: JSON.stringify(data)
}).then(res=>res.json())
  .then(res=>console.log(res))
  .catch(err=>console.error(err));
});
</script>

</body>
</html>
